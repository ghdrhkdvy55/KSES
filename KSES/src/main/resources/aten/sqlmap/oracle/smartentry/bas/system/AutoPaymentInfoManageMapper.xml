<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kses.backoffice.bas.system.mapper.AutoPaymentInfoManageMapper">
	<select id="selectAutoPaymentInfoList" resultType="lmap">
		SELECT 
			A.AUTO_PAYMENT_DAY,
			CASE A.AUTO_PAYMENT_DAY
				WHEN '2' THEN '월요일'
				WHEN '3' THEN '화요일'
				WHEN '4' THEN '수요일'
				WHEN '5' THEN '목요일'
				WHEN '6' THEN '금요일'
				WHEN '7' THEN '토요일'
				WHEN '1' THEN '일요일'
			END AUTO_PAYMENT_DAY_TEXT, 
			TO_CHAR(TO_DATE(AUTO_PAYMENT_OPEN_TM,'HH24MI'),'HH24:MI') AS AUTO_PAYMENT_OPEN_TM, 
			TO_CHAR(TO_DATE(AUTO_PAYMENT_CLOSE_TM,'HH24MI'),'HH24:MI') AS AUTO_PAYMENT_CLOSE_TM,
			A.USE_YN 
		FROM TSEC_AUTO_PAYMENT_INFO_I A  
	</select>
	
	<update id="updateAutoPaymentInfo">
		<foreach collection="autoPaymentInfoList" item="item" separator=";" open="DECLARE BEGIN" close="; END;">	
			UPDATE TSEC_AUTO_PAYMENT_INFO_I SET 
				AUTO_PAYMENT_OPEN_TM = #{item.autoPaymentOpenTm, jdbcType=VARCHAR}, 
				AUTO_PAYMENT_CLOSE_TM = #{item.autoPaymentCloseTm, jdbcType=VARCHAR},
				USE_YN = #{item.useYn, jdbcType=VARCHAR}
			WHERE AUTO_PAYMENT_DAY = #{item.autoPaymentDay}
		</foreach>
	</update>
</mapper>